
// ?????????? ????????? ?????????? ????? ? ??????? HashMap, ????????,
// ??? 1 ??????? ????? ????? ????????? ?????????.
// ???????? ??????? 1) ?????????? ??????
// 2) ????? ?????
// ??????:
// ? ?????: 1
// ?: ??????? ???????
// ?: ??????
// ?: ??????? ?????
// ?: 1242353
// ?: ??????? 1) ?????????? ??????
// 2) ????? ?????
// ? ?????: 1
// ?: ??????? ???????
// ?: ??????
// ?: ??????? ?????
// ?: 547568
// ?: ??????? 1) ?????????? ??????
// 2) ????? ?????
// ?: 2
// ??????: 1242353, 547568
import java.util.HashMap;
import java.util.Map;
import java.util.Scanner;

public class Task_01 {
    static String getKeyByValue(Map<String, String> phoneList, String value) {
        for (var item : phoneList.entrySet()) {
            if (value.equals(item.getValue())) {
                return item.getKey();
            }
        }
        return "";
    }

    static void printPhoneList(Map<String, String> phoneList) {
        System.out.println("?????????? ??????????: ");
        Map<String, String> phoneListResult = new HashMap<>();

        for (var element : phoneList.entrySet()) {
            StringBuilder stb = new StringBuilder();
            String phoneTemp = element.getKey();
            String surnameTemp = element.getValue();

            if (phoneListResult.containsValue(surnameTemp)) {
                String keyOld = getKeyByValue(phoneListResult, surnameTemp);
                if (!keyOld.equals("")) {
                    String temp = stb.append(keyOld).append("; ").append(phoneTemp).toString();
                    phoneListResult.put(temp, surnameTemp);
                    phoneListResult.remove(keyOld);
                }
            } else {
                phoneListResult.put(phoneTemp, surnameTemp);
            }
            System.out.println(phoneListResult.toString());
        }

        for (var element : phoneListResult.entrySet()) {
            System.out.printf("??????? : %-10s ????????: %s\n", element.getValue(), element.getKey());
        }
    }

    public static void main(String[] args) {
        System.out.println("??? ?????????? ?????? - ??????? 1 \n??? ?????? ????? ?????? - ??????? 2 ");
        Scanner scn = new Scanner(System.in);
        try {
            Map<String, String> phoneList = new HashMap<>();
            phoneList.put("9169227690", "???????");
            phoneList.put("9114550274", "??????");
            while (scn.hasNext()) {
                String numberOperation = scn.nextLine();
                if (!numberOperation.equals("1") && !numberOperation.equals("2")) {
                    System.out.println("?? ????? ???????????? ????? ????????!!!");
                    break;
                } else if (numberOperation.equals("1")) {
                    System.out.println("??????? ???????: ");
                    String surname = scn.nextLine();
                    System.out.println("??????? ????? ????????: ");
                    String phoneNumber = scn.nextLine();
                    phoneList.put(phoneNumber, surname);
                    System.out.printf("?? ???????? ? ?????????? ????? ??????:\n ??????? - %s, ????? ????????: %s \n",
                            surname, phoneNumber);
                    System.out.println(phoneList.toString());
                } else {
                    printPhoneList(phoneList);

                }
                System.out.println("??? ?????????? ?????? - ??????? 1 \n??? ?????? ????? ?????? - ??????? 2 ");
            }
        } catch (NumberFormatException e) {
            System.out.println(e);
        }
        scn.close();
    }
}